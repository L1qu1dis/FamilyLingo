<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1" />
  <title>Duolinglight v3 — English Starter + IT</title>
  <meta name="description" content="Apprends l’anglais (débutant à pro IT). Multi‑utilisateurs, mode enfant, PWA hors‑ligne." />
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <meta name="theme-color" content="#0ea5e9"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Duolinglight v3">
  <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand"><span class="logo">🦉</span><span>Duolinglight v3</span></div>
    <nav class="stats">
      <button id="btnSwitchProfile" class="pill">👤 <span id="who"></span></button>
      <div class="pill" title="Expérience"><span id="xp">0</span> XP</div>
      <div class="pill" title="Série"><span id="streak">0</span> 🔥</div>
      <div class="pill hearts" title="Vies"><span id="hearts">∞</span> ❤</div>
    </nav>
  </header>

  <main id="app">
    <section class="profiles" id="profiles">
      <h1>Qui apprend aujourd’hui ?</h1>
      <div id="profilesGrid" class="profiles-grid"></div>
      <button id="btnAddProfile" class="btn primary">➕ Ajouter un profil</button>
    </section>

    <section class="hero hidden" id="home">
      <h1>Programme débutant + thèmes pro</h1>
      <p>Beaucoup plus de questions, écoute **plus claire** (lent/répéter/choix), multi‑utilisateurs & mode enfant.</p>
      <div class="cta-row">
        <button id="btnStartPlacement" class="btn primary">Test de placement</button>
        <button id="btnStartPractice" class="btn">Révisions (SRS)</button>
        <button id="btnStartNew" class="btn">Nouvelle leçon</button>
      </div>
      <div id="kidBadge" class="kid-badge hidden">Mode enfant activé</div>
    </section>

    <section class="units hidden" id="units"></section>

    <section class="session hidden" id="session">
      <div class="session-hd">
        <button id="btnExit" class="icon-btn" title="Quitter la session">✖</button>
        <div class="progress"><div id="progressBar"></div></div>
        <div class="session-stats"><span id="sessionHearts">∞ ❤</span><span id="sessionXp">0 XP</span></div>
      </div>
      <div class="card" id="card"></div>
      <div class="actions" id="actions"></div>
    </section>

    <section class="summary hidden" id="summary"></section>
  </main>

  <footer>
    <div class="links">
      <button id="btnSettings" class="link">Réglages</button>
      <button id="btnReset" class="link danger">Remise à zéro</button>
      <a class="link" href="https://www.gnu.org/philosophy/free-sw.html" target="_blank" rel="noopener">Libre & local</a>
    </div>
    <small>© 2025 Duolinglight – MIT. Non affilié à Duolingo®.</small>
  </footer>

  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <h2 id="modalTitle">Réglages</h2>
      <div id="modalBody"></div>
      <div class="modal-actions">
        <button id="modalCancel" class="btn">Annuler</button>
        <button id="modalOk" class="btn primary">OK</button>
      </div>
    </div>
  </div>

  <script src="./assets/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
